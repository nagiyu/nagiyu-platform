# APIクライアント移行ガイド

## 移行の背景

既存の fetch API 直接使用から、プラットフォーム統一のAPIクライアントへ移行する。

## 主な設計変更

### 依存注入パターン

**変更前**: エラーハンドリングとUI通知が混在

**変更後**: コールバックによる責務分離

- ビジネスロジック層: エラー検知
- UI層: 通知表示

### 型安全性の強化

**変更前**: any型によるランタイムエラーリスク

**変更後**: TypeScript strict mode による型保証

### エラーメッセージの2段階マッピング

**変更前**: ハードコードされたエラーメッセージ

**変更後**:

1.  サービス固有メッセージ（業務文脈）
2.  共通メッセージ（フォールバック）

## 移行の原則

### 段階的移行

- 新機能から適用
- 既存コードは影響範囲を見ながら段階的に移行
- モジュール単位で移行（ファイル単位ではない）

### テスト戦略

- 移行前にテストを追加
- 移行後にテストが引き続きパス
- リグレッションを防ぐ

## 関連ドキュメント

- [APIクライアント設計思想](./api-client-guide.md)
- [アーキテクチャ方針](./architecture.md)
